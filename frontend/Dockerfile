# USE NODE ALPINE IMAGE
FROM node:alpine
# SET ENVIROMENT VARIABLE FOR THE APPLICATION
ENV directory /user/app 
# SET THE WORK DIRECTORY FOR THE APPLICATION
WORKDIR ${directory}
# COPY PACKAGE TO THE APPLICATION DIRECTORY
COPY ./package.json .
# INSTALL ALL DEPENDENCIES
RUN npm i
# COPY EVERYTHING FROM CURRENT DIRECTORY TO THE APPLICATION DIRECTORY 
COPY . .
# BUILD APPLICATION
RUN npm run build
# EXPOSE PORT
EXPOSE 3001
# SERVE THE APPLICATION
CMD ["npm", "run", "start"]